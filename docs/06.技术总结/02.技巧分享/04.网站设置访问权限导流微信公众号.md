---
title: 网站设置访问权限导流微信公众号
date: 2023-11-04 13:46:09
permalink: /pages/874d86/
categories:
  - 技术总结
  - 技巧分享
tags:
  - 微信公众号
---

## 效果展示

平常我们会看到一些网站的内容访问的时候会受到限制, 需要 登录 或者是 关注 才能访问全文, 效果如下:

![阅读全文](https://jsd.cdn.zzko.cn/gh/iFangdays/picGoCDN/utuai/20231104141153.png)

## 注册 openWrite 平台

目前本站点使用的解决策略是 借助于 openWrite 平台提供的支持

点击[注册账号](http://admin.openwrite.cn/)

然后点击 [openWrite 管理后台](https://readmore.openwrite.cn/login)

openWrite绑定公众号方法, 请见详情 [博客导流公众号](https://openwrite.cn/guide/readmore/readmore.html#%E4%B8%80%E3%80%81%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7)

## vuePress 的代码布局

1. 在 `.vuepress => components` 文件夹下面创建组件

```vue

<script>
export default {
  name: 'HideArticle',
  mounted() {
    import('../public/js/btwplugin')  // 引入那段代码脚本,直接把那段代码写到这里不行?还真不行,依旧会报btw is not defined
    // 或者使用require('../../public/js/btwplugin');当然最好是在上面定义,monted里面调用

  }
}
</script>

```

2. 在 `.vuepress => config => head` 全局导入 js

```javascript
export default <HeadTags>[
  [
    'script',
    { charset: 'utf-8', src: 'https://my.openwrite.cn/js/readmore.js' },
  ],
];
```

3. 在 `.vuepress => public => js` 导入 js 加载代码

```javascript
window.onload = function() {
  themeDefaultContent = $(
    '#app > .theme-container  .page > .theme-vdoing-wrapper'
  ); // 通过 jq 查找DOM
  themeDefaultContent.attr('id', 'container'); // 添加标签
  btw = new BTWPlugin(); // 注意btw需要是个全局变量,把const去掉
  btw.init({
    id: 'container', // openWrite 获取到的
    blogId: 'xxxxxx',
    name: '乌图AI',
    qrcode: 'https://www.utuai.com/assets/img/weixin.jpg',
    keyword: 'uTuAIBlog',
  });
};

```

4. 在微信公众号里面设置 关键词回复即可完成


<HideArticle />